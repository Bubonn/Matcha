{"ast":null,"code":"var _jsxFileName = \"/Users/jb/projets/my_matcha/frontend/src/components/UserInfo/UserInfo.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport { BackApi } from \"../../api/back\";\nimport { getCookieByName } from \"../../utils/auth\";\nimport { useSelector } from \"react-redux\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function UserInfo() {\n  _s();\n  const navigate = useNavigate();\n  const selector = useSelector(store => store.user.user);\n  const [jwt, setJwt] = useState(null);\n  async function checkToken() {\n    const token = getCookieByName('token');\n    console.log('TOKEN =', token);\n    if (!token) {\n      navigate('/signin');\n    } else {\n      console.log('TOKEN =', token);\n      const rep = await BackApi.checkToken(token);\n      if (rep.status !== 200) {\n        const response = await BackApi.getUserById(selector.id);\n        console.log(response);\n        // navigate('/signin');\n      } else {\n        setJwt(token);\n      }\n    }\n  }\n  useEffect(() => {\n    checkToken();\n  }, []);\n  if (!jwt) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n}\n_s(UserInfo, \"FIzFzMgvJ7reu+83oJa5LeBkvyk=\", false, function () {\n  return [useNavigate, useSelector];\n});\n_c = UserInfo;\nvar _c;\n$RefreshReg$(_c, \"UserInfo\");","map":{"version":3,"names":["useEffect","useState","Outlet","useNavigate","BackApi","getCookieByName","useSelector","Fragment","_Fragment","jsxDEV","_jsxDEV","UserInfo","_s","navigate","selector","store","user","jwt","setJwt","checkToken","token","console","log","rep","status","response","getUserById","id","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/jb/projets/my_matcha/frontend/src/components/UserInfo/UserInfo.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Outlet, useNavigate } from 'react-router-dom';\nimport { BackApi } from \"../../api/back\";\nimport { getCookieByName } from \"../../utils/auth\";\nimport { useSelector } from \"react-redux\";\nimport { RootState } from \"../../store\";\n\nexport function UserInfo() {\n\n\tconst navigate = useNavigate();\n\tconst selector = useSelector((store: RootState) => store.user.user);\n\tconst [jwt, setJwt] = useState<string | null>(null);\n\n\tasync function checkToken() {\n\t\tconst token: string | null = getCookieByName('token');\n\t\tconsole.log('TOKEN =', token);\n\t\tif (!token) {\n\t\t\tnavigate('/signin');\n\t\t}\n\t\telse {\n\t\tconsole.log('TOKEN =', token);\n\t\tconst rep = await BackApi.checkToken(token);\n\t\t\tif (rep.status !== 200) {\n\t\t\t\tconst response = await BackApi.getUserById(selector.id);\n\t\t\t\tconsole.log(response);\n\t\t\t\t// navigate('/signin');\n\t\t\t} else {\n\t\t\t\tsetJwt(token);\n\t\t\t}\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tcheckToken();\n\t}, [])\n\n\tif (!jwt) {\n\t\treturn (\n\t\t\t<>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Outlet />\n\t\t</>\n\t);\n}"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,MAAM,EAAEC,WAAW,QAAQ,kBAAkB;AACtD,SAASC,OAAO,QAAQ,gBAAgB;AACxC,SAASC,eAAe,QAAQ,kBAAkB;AAClD,SAASC,WAAW,QAAQ,aAAa;AAAC,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAG1C,OAAO,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAE1B,MAAMC,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B,MAAMW,QAAQ,GAAGR,WAAW,CAAES,KAAgB,IAAKA,KAAK,CAACC,IAAI,CAACA,IAAI,CAAC;EACnE,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGjB,QAAQ,CAAgB,IAAI,CAAC;EAEnD,eAAekB,UAAUA,CAAA,EAAG;IAC3B,MAAMC,KAAoB,GAAGf,eAAe,CAAC,OAAO,CAAC;IACrDgB,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,KAAK,CAAC;IAC7B,IAAI,CAACA,KAAK,EAAE;MACXP,QAAQ,CAAC,SAAS,CAAC;IACpB,CAAC,MACI;MACLQ,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEF,KAAK,CAAC;MAC7B,MAAMG,GAAG,GAAG,MAAMnB,OAAO,CAACe,UAAU,CAACC,KAAK,CAAC;MAC1C,IAAIG,GAAG,CAACC,MAAM,KAAK,GAAG,EAAE;QACvB,MAAMC,QAAQ,GAAG,MAAMrB,OAAO,CAACsB,WAAW,CAACZ,QAAQ,CAACa,EAAE,CAAC;QACvDN,OAAO,CAACC,GAAG,CAACG,QAAQ,CAAC;QACrB;MACD,CAAC,MAAM;QACNP,MAAM,CAACE,KAAK,CAAC;MACd;IACD;EACD;EAEApB,SAAS,CAAC,MAAM;IACfmB,UAAU,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,IAAI,CAACF,GAAG,EAAE;IACT,oBACCP,OAAA,CAAAF,SAAA,mBACE,CAAC;EAEL;EAEA,oBACCE,OAAA,CAAAF,SAAA;IAAAoB,QAAA,eACClB,OAAA,CAACR,MAAM;MAAA2B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC,gBACT,CAAC;AAEL;AAACpB,EAAA,CAzCeD,QAAQ;EAAA,QAENR,WAAW,EACXG,WAAW;AAAA;AAAA2B,EAAA,GAHbtB,QAAQ;AAAA,IAAAsB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}